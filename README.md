<p align="center">
    <a href="https://cyverse.org" alt="CyVerse"><img src="https://img.shields.io/badge/Powered%20%20By-CyVerse-blue.svg?logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjIxcHgiIHZpZXdCb3g9IjAgMCAyNCAyMSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT5Hcm91cCAxNTwvdGl0bGU%2BICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz4gICAgICAgIDxwb2x5Z29uIGlkPSJwYXRoLTEiIHBvaW50cz0iMC4wNTU0MDU3MTQzIDAuMDY1NTcxNDI4NiA5LjE5MzY2Mjg2IDAuMDY1NTcxNDI4NiA5LjE5MzY2Mjg2IDMuNDA0MDkxNDMgMC4wNTU0MDU3MTQzIDMuNDA0MDkxNDMiPjwvcG9seWdvbj4gICAgICAgIDxwb2x5Z29uIGlkPSJwYXRoLTMiIHBvaW50cz0iMC4wNjU1NTgzNTk5IDAuMDM5MTg4NTcxNCAyMy4yNDUwMjg2IDAuMDM5MTg4NTcxNCAyMy4yNDUwMjg2IDEyLjU2MDk1NjYgMC4wNjU1NTgzNTk5IDEyLjU2MDk1NjYiPjwvcG9seWdvbj4gICAgPC9kZWZzPiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJnbG9iZUxvZ28iIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xLjAwMDAwMCwgLTIuMDAwMDAwKSI%2BICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMi4wMDAwMDApIj4gICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1LjY0MzU2LDQuMjQ2MDExNDMgQzExLjY4MTY3NDMsMy40NDk4OTcxNCA2LjM3ODE4ODU3LDMuOTE1NzU0MjkgMy4yMzYyNDU3MSw3LjE0NTM4Mjg2IEMxLjkwMjc4ODU3LDguNTE1OTU0MjkgMC44ODExNiw5Ljk5OTA2ODU3IDAuNTk5OTMxNDI5LDEyLjA5MzY2ODYgQzAuNTAyMzAyODU3LDEyLjgyMTA0IDEuNzE0Mjg1NzFlLTA1LDEyLjAxMzg2ODYgMS43MTQyODU3MWUtMDUsMTAuNjUxMjY4NiBDMS43MTQyODU3MWUtMDUsMTAuMTA0NjY4NiAwLjQ2MTQxNzE0Myw4LjgwMTU1NDI5IDAuNzU0NjQ1NzE0LDguMTE0ODk3MTQgQzEuODg3NDQ1NzEsNS40NjIxMjU3MSA2LjMyNTczMTQzLDIuMDA4NjExNDMgMTUuNjQzNTYsNC4yNDYwMTE0MyIgaWQ9IkZpbGwtMSIgZmlsbD0iI0ZERjlGQiI%2BPC9wYXRoPiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUuMTMxNzg1NywyMC4xNTUzMDI5IEMxNi4xODY1LDE5Ljk3MTAxNzEgMTYuMzkyMTI4NiwxOS4wMzM4MTcxIDE1LjkyOTI3MTQsMTguNzQ1ODE3MSBDMTUuNzA2MTU3MSwxOC42MDY4NzQzIDE1LjQ2NjMyODYsMTguNjQ3MTYgMTUuMjUzNSwxOC42NjkwMTcxIEM2LjYxMzE1NzE0LDE5LjU1NzYxNzEgMS44MjYxLDE2LjE0NzkwMjkgMC43NDAxLDEyLjg0OTEwMjkgQzAuNjIxNDcxNDI5LDEyLjQ4ODY3NDMgMC4xOTU2NDI4NTcsMTEuMTAyMDc0MyAwLjAyMDYxNDI4NTcsMTAuMzY4Mjc0MyBDLTAuMTkzMzI4NTcxLDE2LjU3NjA0NTcgNi41NTQ4NzE0MywyMS42NTQwMTcxIDE1LjEzMTc4NTcsMjAuMTU1MzAyOSIgaWQ9IkZpbGwtMyIgZmlsbD0iI0ZERjlGQiI%2BPC9wYXRoPiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuNzQ2Mzc3MSwyLjI2NTU0IEMxMC44NjY4OTE0LDEuNjY2NjU0MjkgMS40NDA1NDg1NywzLjAxNzE2ODU3IDAuNDMzMDYyODU3LDcuNzM2NTk3MTQgQzAuMjkxNzIsOC4yMTA1OTcxNCAwLjIxNDQwNTcxNCw4LjY5MDM0IDAuMjAxMDM0Mjg2LDkuMTcwMDgyODYgQzAuMjI0MDA1NzE0LDguODI4NTExNDMgMC4yNDE4MzQyODYsOC41NjMxNCAwLjI1OTc0ODU3MSw4LjMzNzc5NzE0IEMwLjMwODk0ODU3MSw3Ljg5Mjk0IDAuMzcyODkxNDI5LDcuMzkwMjI1NzEgMC40NTM0NjI4NTcsNi45NDk0ODI4NiBDMC40NzQ3Miw2Ljg0MTQ4Mjg2IDAuNDk4NjM0Mjg2LDYuNzI0Mzk3MTQgMC41MjU0NjI4NTcsNi41OTQ0NTQyOSBMMC41MjU4MDU3MTQsNi41OTMzNCBMMC42MzQ4MzQyODYsNi4xNDkyNTQyOSBMMC42Mzc1NzcxNDMsNi4xMzg3MTE0MyBMMC42MzgyNjI4NTcsNi4xMzYxNCBDMC42NTIwNjI4NTcsNi4wODQzNjg1NyAwLjY2NjYzNDI4Niw2LjAzMjk0IDAuNjgyMDYyODU3LDUuOTgxNDI1NzEgQzAuODU4MTIsNS4zOTAxNjg1NyAxLjE2Njc3NzE0LDQuODI3MzY4NTcgMS41MTU2MzQyOSw0LjI0NTc5NzE0IEMyLjAxNDQ5MTQzLDMuNDEzOTQgNS42NDU2MDU3MSwwLjUyMjExMTQyOSAxMy43NDYzNzcxLDIuMjY1NTQiIGlkPSJGaWxsLTUiIGZpbGw9IiNGREY5RkIiPjwvcGF0aD4gICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTE4MTY4NTcxLDYuNDczMjM3MTQgQzAuNDE4NTY4NTcxLDcuMDI2MjY1NzEgMC4zNTU0ODI4NTcsNy4zNzcyNjU3MSAwLjMxMTY4Mjg1Nyw3LjY4ODIzNzE0IEMwLjI4OTY1NDI4Niw3Ljg1NjQwODU3IDAuMjcwNjI1NzE0LDguMDIzMjk0MjkgMC4yNTQ5NCw4LjE4MzQ5NDI5IEMwLjIzMzUxMTQyOSw4LjQyNjY2NTcxIDAuMTcxNTQsOC42OTg5OCAwLjIwMTExMTQyOSw5LjA3MjM1MTQzIEMwLjgyOTc0LDE2Ljk5MDIwODYgMTMuODAwNTQsMTguNjg2NDk0MyAyMS4yNjE4ODI5LDE1LjY5Mjc1MTQgQzIyLjM5NDA4MjksMTUuMjM4NDY1NyAyMi4yMjUzOTcxLDEzLjc2MTUyMjkgMjEuNTcxNTY4NiwxMy42NDU4MDg2IEMyMS4zODMzNCwxMy42MTI0NjU3IDIxLjIxMDE5NzEsMTMuNjk0MzIyOSAyMS4wNjYzNjg2LDEzLjc0NzM4IEMxMS4xOTgxNjg2LDE3LjM5MzA2NTcgMC4xMDIyODI4NTcsMTQuNDY3MDM3MSAwLjQ1MjM0LDcuNjYzNDY1NzEgQzAuNDgwNTQsNy4xMTYxOCAwLjQ4NTk0LDYuNTY2NDA4NTcgMC42MjQ5Njg1NzEsNi4wMjM0OTQyOSBMMC41MTgxNjg1NzEsNi40NzMyMzcxNCBaIiBpZD0iRmlsbC03IiBmaWxsPSIjRkRGOUZCIj48L3BhdGg%2BICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS42Mjg1NzEsIDAuMDIwMTQzKSI%2BICAgICAgICAgICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI%2BICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4gICAgICAgICAgICAgICAgICAgIDwvbWFzaz4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJDbGlwLTEwIj48L2c%2BICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC4wNTU0MDU3MTQzLDMuNDA0MDkxNDMgQzAuMzA3NzQ4NTcxLDMuMDExMjYyODYgMC42NzE0MzQyODYsMi41MDU4MDU3MSAwLjk0NjY2Mjg1NywyLjEyODQwNTcxIEMxLjE0MDYzNDI5LDEuODg5MDkxNDMgMS4zMDczNDg1NywxLjY4ODg2Mjg2IDEuNDk1MjM0MjksMS40OTI3NDg1NyBDMy42ODE4OTE0MywtMC43ODk4MjI4NTcgNy40MjUyOTE0MywwLjIxMzI5MTQyOSA5LjE5MzY2Mjg2LDAuNzgzMjkxNDI5IEM2Ljk2MTE0ODU3LDAuNTAwMzQ4NTcxIDIuODQyMTQ4NTcsLTAuMjIyODIyODU3IDAuMDU1NDA1NzE0MywzLjQwNDA5MTQzIiBpZD0iRmlsbC05IiBmaWxsPSIjRkRGOUZCIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuNjg1NzE0LCAxLjQ3NzI4NikiPiAgICAgICAgICAgICAgICAgICAgPG1hc2sgaWQ9Im1hc2stNCIgZmlsbD0id2hpdGUiPiAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMyI%2BPC91c2U%2BICAgICAgICAgICAgICAgICAgICA8L21hc2s%2BICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iQ2xpcC0xMyI%2BPC9nPiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuNzI2NjYyODYsMC44NzYwMTcxNDMgQzEuNDkwNTIsMS4yMTAzODg1NyAxLjE4OTQwNTcxLDEuNjQ1NjQ1NzEgMC45NTI3NDg1NzEsMi4wMTUxNiBDMC44NTgyMDU3MTQsMi4xNzM0NzQyOSAwLjc2MTYwNTcxNCwyLjM0MDg3NDI5IDAuNjY4OTQ4NTcxLDIuNTA3OTMxNDMgQy0wLjcyMTUwODU3MSw1LjIyMzg3NDI5IDAuMjkyNzQ4NTcxLDguMzA4Mzg4NTcgMy42OTUzNDg1NywxMC40MTA3ODg2IEM4LjQ3ODk3NzE0LDEzLjM2NjczMTQgMTYuMTcwNzIsMTMuMjYxOTAyOSAyMC44NzU0OTE0LDEwLjE3NjcwMjkgQzIxLjc3OTAwNTcsOS41ODQxNiAyMi41MDY3Miw4LjkyNDc2IDIzLjA1ODgwNTcsOC4yMjUxNiBDMjMuNTk4MDM0Myw3LjMzNzA3NDI5IDIyLjgzNzMyLDYuMjM2NzYgMjIuNDExMjM0Myw2LjI1NTcwMjg2IEMyMi4zMDMyMzQzLDYuMjYwNTg4NTcgMjIuMTY1MjM0Myw2LjMzNzkwMjg2IDIyLjA4NzA2MjksNi40MTI0NzQyOSBDMjEuNTgzMjM0Myw3LjA1MDg3NDI5IDIwLjkxOTQ2MjksNy42NTI0MTcxNCAyMC4wOTQ5NzcxLDguMTkzMDE3MTQgQzE1LjgwMjY2MjksMTEuMDA3Nzg4NiA4Ljc4NDk3NzE0LDExLjEwMzM2IDQuNDIwNzQ4NTcsOC40MDY1MzE0MyBDMC44MjA1NzcxNDMsNi4xODE4MTcxNCAwLjE1MTE0ODU3MSwyLjc1MjA0NTcxIDIuNDM2MjA1NzEsMC4wMzkxODg1NzE0IEwyLjQxMzMyLDAuMDY0MDQ1NzE0MyBDMi4xNjgwMDU3MSwwLjMzNTg0NTcxNCAxLjkxNzYzNDI5LDAuNjIzOTMxNDI5IDEuNzI2NjYyODYsMC44NzYwMTcxNDMiIGlkPSJGaWxsLTEyIiBmaWxsPSIjRkRGOUZCIiBtYXNrPSJ1cmwoI21hc2stNCkiPjwvcGF0aD4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg%3D%3D%0A" 
    alt="Join today"></a>
</p>    

# CloudCompare

Docker build for [CloudCompare](https://www.danielgm.net/cc/) based on [NVIDIA OpenGL Ubuntu](https://hub.docker.com/r/nvidia/opengl) containers.

[CloudCompare Github](https://github.com/cloudcompare/cloudcompare)

image            | description                               | size   | metrics | build status 
---------------- | ----------------------------------------- | ------ | ------- | --------------
[![DockerHub](https://img.shields.io/badge/DockerHub-brightgreen.svg?style=popout&logo=Docker)](https://hub.docker.com/r/tswetnam/cloudcompare)  | CloudCompare w/ NVIDIA OpenGL Ubuntu 18.04 base | [![](https://images.microbadger.com/badges/image/tswetnam/cloudcompare.svg)](https://microbadger.com/images/tswetnam/cloudcompare) | [![](https://img.shields.io/docker/pulls/tswetnam/cloudcompare.svg)](https://hub.docker.com/r/tswetnam/cloudcompare)  |  [![](https://img.shields.io/docker/automated/tswetnam/cloudcompare.svg)](https://hub.docker.com/r/tswetnam/cloudcompare/builds)


## Instructions

Pull the latest container from Docker-Hub:

```
docker pull tswetnam/cloudcompare:latest
```

Build the container yourself:

```
git clone https://github.com/tyson-swetnam/cloudcompare-docker && \
cd cloudcompare-docker
docker build -t tswetnam/cloudcompare:latest .
```

## Windows

TBD

## Linux

To run a [Docker GUI container](http://wiki.ros.org/docker/Tutorials/GUI#The_simple_way) with OpenGL on Intel graphics (e.g. Atmosphere Virtual Machines, Intel NUCs):

**NOT SECURE**

```
xhost +local:root
docker run -ti --rm -e "DISPLAY=unix$DISPLAY" -v="/tmp/.X11-unix:/tmp/.X11-unix:rw" -v /home/$USER/:/temp --privileged tswetnam/cloudcompare:latest CloudCompare
```

This method is okay on CyVerse Atmosphere, where you're running in your own Web Desktop environment. 

## Mac OS X

https://cntnr.io/running-guis-with-docker-on-mac-os-x-a14df6a76efc 

## Singularity

You can run the Docker container with Singularity (for HPC use).

```
singularity exec docker://tswetnam/cloudcompare:latest CloudCompare
```

# University of Arizona HPC

Log into the HPC

```
ssh -X $USER@hpc.arizona.edu
```

Select a system from the Bastion

```
ocelote -X
```

Start a GPU node

```
qsub -X -I -N cloudcompare -m bea -W group_list=$GROUP -q windfall -l select=1:ncpus=28:mem=168gb:ngpus=1 -l cput=1:0:0 -l walltime=1:0:0
```

Load Cuda and Singularity

```
module load cuda80/gtk
module load singularity
```

Run the container and start CloudCompare

```
singularity exec --bind /xdisk/$USER docker://tswetnam/cloudcompare:latest CloudCompare
```

If you get an error, you may need to reset the DISPLAY.

Find out what the local display is:

```
echo $DISPLAY
```

Run Docker container as shell

```
singularity shell --bind /xdisk/$USER docker://tswetnam/cloudcompare:latest
```

From the Singularity shell:

```
export DISPLAY=localhost:50.0
```

Start CloudCompare

```
CloudCompare
```
